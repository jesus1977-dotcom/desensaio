<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<title>Acordes</title>

<style>
/* =========================
   BASE / TEMA
========================= */
:root {
  --bg-main: #141617;
  --bg-card: #1f2426;
  --bg-card-hover: #262b2e;
  --border-soft: #2a2a2a;
  --text-main: #e6e6e6;
  --accent: #1e4d5c;
  --accent-hover: #256273;
  --gold: #f1c27d;
}

body {
  margin: 0;
  padding: 28px;
  background: var(--bg-main);
  color: var(--text-main);
  font-family: Arial, sans-serif;
}

/* =========================
   TOPO
========================= */
.top-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 18px;
}

h1 {
  margin: 0;
  font-size: 26px;
}

.btn {
  padding: 10px 18px;
  border-radius: 22px;
  background: var(--accent);
  color: #fff;
  font-weight: 700;
  font-size: 13px;
  border: none;
  cursor: pointer;
}

.btn:hover {
  background: var(--accent-hover);
}

/* =========================
   PESQUISA
========================= */
#search {
  width: 100%;
  padding: 14px 18px;
  border-radius: 30px;
  border: none;
  outline: none;
  font-size: 14px;
  margin-bottom: 25px;
}

/* =========================
   GRUPOS
========================= */
.group {
  margin-bottom: 26px;
  background: linear-gradient(180deg, #171a1c, #141617);
  border-radius: 18px;
  padding: 18px;
  border: 1px solid var(--border-soft);
}

.group-title {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 14px;
}

/* =========================
   CARDS
========================= */
.cards {
  display: grid;
  grid-template-columns: repeat(auto-fill, 160px); /* ‚¨ÖÔ∏è FIXO */
  gap: 16px;
  align-items: start;
}


/* CARD ‚Äî COM ESPA√áO REAL PARA A√á√ïES */
.card {
  background: var(--bg-card);
  border-radius: 14px;

  padding: 30px 12px 12px;

  width: 160px;        /* ‚¨ÖÔ∏è IGUAL √Ä COLUNA */
  box-sizing: border-box;

  box-shadow:
    inset 0 1px 1px rgba(255,255,255,0.04),
    0 4px 10px rgba(0,0,0,0.5);

  position: relative;
}

   .card * {
  box-sizing: border-box;
}

.card:hover {
  background: var(--bg-card-hover);
}

/* NOME DO ACORDE */
.card-name {
  font-weight: 800;
  font-size: 13px;
  margin-bottom: 4px;
  text-align: center;
  letter-spacing: 0.3px;
}

/* MAJ / m / etc */
.chord-type {
  font-size: 11px;
  font-weight: 700;
  opacity: 0.7;
  margin-left: 4px;
}

/* TABLATURA */
pre {
  margin: 0;
  font-family: monospace;
  font-size: 12px;
  line-height: 1.05;
  opacity: 0.9;
}

/* =========================
   A√á√ïES (√çCONES)
========================= */
.card-actions {
  position: absolute;
  top: 6px;
  right: 6px;

  display: flex;
  flex-direction: column;
  gap: 4px;
}

.card-actions .action {
  background: rgba(0,0,0,0.35);
  border: 1px solid rgba(255,255,255,0.08);

  width: 22px;
  height: 22px;

  display: flex;
  align-items: center;
  justify-content: center;

  border-radius: 50%;
  cursor: pointer;

  font-size: 12px;
  line-height: 1;

  padding: 0;

  transition: all 0.15s ease;
}

/* editar */
.card-actions .edit {
  color: var(--gold);
}

/* apagar */
.card-actions .delete {
  color: #ff6b6b;
}

.card-actions .action:hover {
  transform: scale(1.1);
  background: rgba(0,0,0,0.6);
}


/* =========================
   MODAL
========================= */
#modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.75);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 999;
}

.modal-box {
  background: #1b1e20;
  padding: 22px;
  border-radius: 18px;
  width: 420px;
  border: 1px solid var(--border-soft);
}

.modal-box h2 {
  margin-top: 0;
}

.modal-box label {
  font-size: 13px;
  color: #aaa;
}

.modal-box input,
.modal-box select {
  width: 100%;
  padding: 10px;
  margin-bottom: 10px;
  border-radius: 20px;
  border: none;
  background: #141617;
  color: #fff;
}

.string-inputs {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 6px;
  margin-bottom: 12px;
}

.modal-actions {
  display: flex;
  justify-content: space-between;
}
</style>

</head>

<body>

<div class="top-bar">
  <h1>Acordes</h1>
  <div>
    <button class="btn" onclick="openModal()">+ Inserir acorde</button>
    <button class="btn" onclick="history.back()">Voltar</button>
  </div>
</div>

<input id="search" placeholder="Procurar acorde (ex: maj7, sus, add‚Ä¶)">

<div id="list"></div>

<!-- MODAL -->
<div id="modal">
  <div class="modal-box">
    <h2 id="modalTitle">Novo acorde</h2>

    <label>Nota base</label>
    <select id="root">
      <option>C</option><option>D</option><option>E</option>
      <option>F</option><option>G</option><option>A</option><option>B</option>
    </select>

    <label>Nome do acorde</label>
    <input id="name" placeholder="maj7, m, sus4, add9">

    <label>Tablatura (E A D G B e)</label>
    <div class="string-inputs">
      <input id="s6" placeholder="E">
      <input id="s5" placeholder="A">
      <input id="s4" placeholder="D">
      <input id="s3" placeholder="G">
      <input id="s2" placeholder="B">
      <input id="s1" placeholder="e">
    </div>

    <div class="modal-actions">
      <button class="btn" onclick="closeModal()">Cancelar</button>
      <button class="btn" onclick="saveChord()">Guardar</button>
    </div>
  </div>
</div>

<script>
/* =========================
   DADOS
========================= */
const STORAGE_KEY = 'chords-db';

let chords = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [

  /* =========================
     C
  ========================= */
  { root:'C', name:'M',     strings:['x','3','2','0','1','0'] },
  { root:'C', name:'m',    strings:['x','3','5','5','4','3'] },
  { root:'C', name:'maj7', strings:['x','3','2','0','0','0'] },
  { root:'C', name:'m7',   strings:['x','3','1','3','1','3'] },
  { root:'C', name:'5',    strings:['x','3','5','5','x','x'] },
  { root:'C', name:'sus4', strings:['x','3','3','0','1','1'] },
  { root:'C', name:'sus2', strings:['x','3','0','0','1','3'] },

  /* =========================
     D
  ========================= */
  { root:'D', name:'M',     strings:['x','x','0','2','3','2'] },
  { root:'D', name:'m',    strings:['x','x','0','2','3','1'] },
  { root:'D', name:'maj7', strings:['x','x','0','2','1','2'] },
  { root:'D', name:'m7',   strings:['x','x','0','2','1','1'] },
  { root:'D', name:'5',    strings:['x','x','0','2','3','x'] },
  { root:'D', name:'sus4', strings:['x','x','0','2','3','3'] },
  { root:'D', name:'sus2', strings:['x','x','0','2','3','0'] },

  /* =========================
     E
  ========================= */
  { root:'E', name:'M',     strings:['0','2','2','1','0','0'] },
  { root:'E', name:'m',    strings:['0','2','2','0','0','0'] },
  { root:'E', name:'maj7', strings:['0','2','1','1','0','0'] },
  { root:'E', name:'m7',   strings:['0','2','0','0','0','0'] },
  { root:'E', name:'5',    strings:['0','2','2','x','x','x'] },
  { root:'E', name:'sus4', strings:['0','2','2','2','0','0'] },
  { root:'E', name:'sus2', strings:['0','2','4','4','0','0'] },

  /* =========================
     F
  ========================= */
  { root:'F', name:'M',     strings:['1','3','3','2','1','1'] },
  { root:'F', name:'m',    strings:['1','3','3','1','1','1'] },
  { root:'F', name:'maj7', strings:['x','x','3','2','1','0'] },
  { root:'F', name:'m7',   strings:['1','3','1','1','1','1'] },
  { root:'F', name:'5',    strings:['1','3','3','x','x','x'] },
  { root:'F', name:'sus4', strings:['1','3','3','3','1','1'] },
  { root:'F', name:'sus2', strings:['1','3','3','0','1','1'] },

  /* =========================
     G
  ========================= */
  { root:'G', name:'M',     strings:['3','2','0','0','0','3'] },
  { root:'G', name:'m',    strings:['3','5','5','3','3','3'] },
  { root:'G', name:'maj7', strings:['3','2','0','0','0','2'] },
  { root:'G', name:'m7',   strings:['3','5','3','3','3','3'] },
  { root:'G', name:'5',    strings:['3','5','5','x','x','x'] },
  { root:'G', name:'sus4', strings:['3','3','0','0','1','3'] },
  { root:'G', name:'sus2', strings:['3','0','0','0','3','3'] },

  /* =========================
     A (L√Å)
  ========================= */
  { root:'A', name:'M',     strings:['x','0','2','2','2','0'] },
  { root:'A', name:'m',    strings:['x','0','2','2','1','0'] },
  { root:'A', name:'maj7', strings:['x','0','2','1','2','0'] },
  { root:'A', name:'m7',   strings:['x','0','2','0','1','0'] },
  { root:'A', name:'5',    strings:['x','0','2','2','x','x'] },
  { root:'A', name:'sus4', strings:['x','0','2','2','3','0'] },
  { root:'A', name:'sus2', strings:['x','0','2','2','0','0'] },

  /* =========================
     B (SI)
  ========================= */
  { root:'B', name:'M',     strings:['x','2','4','4','4','2'] },
  { root:'B', name:'m',    strings:['x','2','4','4','3','2'] },
  { root:'B', name:'maj7', strings:['x','2','4','3','4','2'] },
  { root:'B', name:'m7',   strings:['x','2','4','2','3','2'] },
  { root:'B', name:'5',    strings:['x','2','4','4','x','x'] },
  { root:'B', name:'sus4', strings:['x','2','4','4','5','2'] },
  { root:'B', name:'sus2', strings:['x','2','4','4','2','2'] }

];


let editingIndex = null;


/* =========================
   RENDER
========================= */
const list = document.getElementById('list');
const search = document.getElementById('search');

function render() {
  list.innerHTML = '';

  const q = search.value.toLowerCase();

  ['C','D','E','F','G','A','B'].forEach(root => {
   const group = chords
  .filter(c =>
    c.root === root &&
    (c.name + root).toLowerCase().includes(q)
  )
  .sort((a, b) => {
    const order = name => {
      if (name === '') return 0;   // maior
      if (name === 'm') return 1;  // menor
      return 2;
    };

    const diff = order(a.name) - order(b.name);
    if (diff !== 0) return diff;

    return a.name.localeCompare(b.name);
  });

    if (!group.length) return;

    const div = document.createElement('div');
    div.className = 'group';
    div.innerHTML = `<div class="group-title">${root}</div>
                     <div class="cards"></div>`;
    const cards = div.querySelector('.cards');

    group.forEach(c => {
      const idx = chords.indexOf(c);
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
       <div class="card-actions">
  <button
    class="action edit"
    title="Editar"
    onclick="editChord(${idx})"
  >‚úèÔ∏è</button>

  <button
    class="action delete"
    title="Apagar"
    onclick="deleteChord(${idx})"
  >üóë</button>
</div>
        <div class="card-name">
  ${c.root}<span class="chord-type">${c.name || 'maj'}</span>
</div>

        <pre>${formatStrings(c.strings)}</pre>
      `;
      cards.appendChild(card);
    });

    list.appendChild(div);
  });

  localStorage.setItem(STORAGE_KEY, JSON.stringify(chords));
}

function formatStrings(s) {
  return `e|-${s[5]}-
B|-${s[4]}-
G|-${s[3]}-
D|-${s[2]}-
A|-${s[1]}-
E|-${s[0]}-`;
}

/* =========================
   MODAL
========================= */

function openModal() {
  editingIndex = null;

  document.getElementById('modalTitle').innerText = 'Novo acorde';

  document.getElementById('root').value = 'C';
  document.getElementById('name').value = '';

  ['s6','s5','s4','s3','s2','s1'].forEach(id => {
    document.getElementById(id).value = '';
  });

  document.getElementById('modal').style.display = 'flex';
}

function closeModal() {
  document.getElementById('modal').style.display = 'none';
}

/* =========================
   GUARDAR / EDITAR
========================= */

function saveChord() {
  const chord = {
    root: document.getElementById('root').value,
    name: document.getElementById('name').value.trim(),
    strings: [
      document.getElementById('s6').value || 'x',
      document.getElementById('s5').value || 'x',
      document.getElementById('s4').value || 'x',
      document.getElementById('s3').value || 'x',
      document.getElementById('s2').value || 'x',
      document.getElementById('s1').value || 'x'
    ]
  };

  if (!chord.name) {
    alert('D√° um nome ao acorde.');
    return;
  }

  if (editingIndex !== null) {
    chords[editingIndex] = chord;
  } else {
    chords.push(chord);
  }

  localStorage.setItem(STORAGE_KEY, JSON.stringify(chords));

  closeModal();
  render();
}

/* =========================
   EDITAR
========================= */

function editChord(i) {
  const c = chords[i];
  editingIndex = i;

  document.getElementById('modalTitle').innerText = 'Editar acorde';

  document.getElementById('root').value = c.root;
  document.getElementById('name').value = c.name;

  document.getElementById('s6').value = c.strings[0];
  document.getElementById('s5').value = c.strings[1];
  document.getElementById('s4').value = c.strings[2];
  document.getElementById('s3').value = c.strings[3];
  document.getElementById('s2').value = c.strings[4];
  document.getElementById('s1').value = c.strings[5];

  document.getElementById('modal').style.display = 'flex';
}

/* =========================
   APAGAR
========================= */

function deleteChord(i) {
  if (!confirm('Apagar este acorde?')) return;

  chords.splice(i, 1);
  localStorage.setItem(STORAGE_KEY, JSON.stringify(chords));
  render();
}

/* =========================
   PESQUISA + INIT
========================= */

search.addEventListener('input', render);
render();

</script>

</body>
</html>
